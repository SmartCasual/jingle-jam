<h1><%= @fundraiser.name %></h1>

<h2><%= t("common.headers.bundles") %></h2>

<% if (bundles = @fundraiser.bundles.live).any? %>
  <ul>
    <% bundles.each do |bundle| %>
      <li class="bundle">
        <h3><%= bundle.name %></h3>
        <p>Donate <%= bundle.highest_tier.price.format %> or more to receive everything in this bundle.</p>

        <ul>
          <% bundle.bundle_tiers.sort_by(&:price)[0..-1].each.with_index do |tier, index| %>
            <li class="tier">
              <% if bundle.bundle_tiers.count > 1 %>
                <h4><%= tier.price.format %><%= " (#{tier.name})" if tier.name.present? %></h4>
                <p>Donate <%= tier.price.format %> or more to receive everything in this tier.</p>
                <% if index.positive? %>
                  <p>Includes everything in the previous tiers.</p>
                <% end %>
              <% end %>

              <ul>
                <% tier.games.each do |game| %>
                  <li class="game"><%= link_to game.name, game_path(game) %></li>
                <% end %>
              </ul>
            </li>
          <% end %>
        </ul>
      </li>
    <% end %>
  </ul>
<% else %>
  <p>
    <%= t("fundraisers.show.no_bundles") %>
  </p>
<% end %>

<p>
  <%= link_to t("common.actions.donate_here"), new_fundraiser_donation_path(@fundraiser), class: "cta" %>
</p>

<p>
  <%= link_to "See current donations", fundraiser_donations_path(@fundraiser), class: "cta" %>
</p>

<% if @fundraiser.charities.any? %>
  <h2><%= t("common.headers.charities") %></h2>
  <ul>
    <% @fundraiser.charities.each do |charity| %>
      <li><%= link_to charity.name, charity_path(charity) %></li>
    <% end %>
  </ul>
<% end %>
